-htitle '问题'

:ruby
  title = @question.title
  content = @question.content
  answers = @question.answers
  creator = @question.creator
  created_at = @question.created_at.localtime

  answered = @question.is_answered_by(current_user)
  
  tags = @question.tags
  
.page-title=title

.page-question-show
  .question
    .js-list-tags
      =show_tags_in_list tags
      %a.edit{:href=>'javascript:;', :title=>'修改标签'} 修改
      
    .ct=content
    
    .meta
      .c-avatar=avatar creator,:mini
      %span.creator #{userlink creator} 提问
      %span , 
      %span.time=created_at
    =render 'questions/parts/question_comments', :comments => @question.comments
  
  .answers
    - answers.each do |answer|
      :ruby
        creator = answer.creator
        created_at = answer.created_at
        content = answer.content
        
      .answer{:'data-id'=>answer.id}
        .ct=content
        .meta
          .c-avatar=avatar creator,:mini
          %span.creator #{userlink creator} 回答
          %span , 
          %span.time=created_at
          
        .ops
          %a.vote-up{:href=>'javascript:;'} 赞成
          .sum=answer.vote_sum || 0
          %a.vote-down{:href=>'javascript:;'} 反对
          
        =render 'questions/parts/answer_comments', :comments=>answer.comments, :answer=>answer


  -if !answered
    .answer-form
      = form_for @answer, :url => { :controller => 'answers', :action => 'create' } do |f|
        .field
          = f.hidden_field :question_id, :value => @question.id
          %label.need 我的回答
          %textarea{:name=>'answer[content]'}
          
        .field
          %a.form-submit-button{:href=>'javascript:;'} 回答
  -else
    .answered 我已经回答过这个问题了
